"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "afterChange", {
    enumerable: true,
    get: function() {
        return afterChange;
    }
});
const _deepCopyObject = require("../../../utilities/deepCopyObject");
const _traverseFields = require("./traverseFields");
const afterChange = async ({ collection, context, data, doc: incomingDoc, global, operation, previousDoc, req })=>{
    const doc = (0, _deepCopyObject.deepCopyObject)(incomingDoc);
    await (0, _traverseFields.traverseFields)({
        collection,
        context,
        data,
        doc,
        fields: collection?.fields || global?.fields,
        global,
        operation,
        previousDoc,
        previousSiblingDoc: previousDoc,
        req,
        siblingData: data,
        siblingDoc: doc
    });
    return doc;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9maWVsZHMvaG9va3MvYWZ0ZXJDaGFuZ2UvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBTYW5pdGl6ZWRDb2xsZWN0aW9uQ29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vY29sbGVjdGlvbnMvY29uZmlnL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBQYXlsb2FkUmVxdWVzdCwgUmVxdWVzdENvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9leHByZXNzL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBTYW5pdGl6ZWRHbG9iYWxDb25maWcgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2NvbmZpZy90eXBlcydcblxuaW1wb3J0IHsgZGVlcENvcHlPYmplY3QgfSBmcm9tICcuLi8uLi8uLi91dGlsaXRpZXMvZGVlcENvcHlPYmplY3QnXG5pbXBvcnQgeyB0cmF2ZXJzZUZpZWxkcyB9IGZyb20gJy4vdHJhdmVyc2VGaWVsZHMnXG5cbnR5cGUgQXJnczxUPiA9IHtcbiAgY29sbGVjdGlvbjogU2FuaXRpemVkQ29sbGVjdGlvbkNvbmZpZyB8IG51bGxcbiAgY29udGV4dDogUmVxdWVzdENvbnRleHRcbiAgZGF0YTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBUXG4gIGRvYzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBUXG4gIGdsb2JhbDogU2FuaXRpemVkR2xvYmFsQ29uZmlnIHwgbnVsbFxuICBvcGVyYXRpb246ICdjcmVhdGUnIHwgJ3VwZGF0ZSdcbiAgcHJldmlvdXNEb2M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgVFxuICByZXE6IFBheWxvYWRSZXF1ZXN0XG59XG5cbmV4cG9ydCBjb25zdCBhZnRlckNoYW5nZSA9IGFzeW5jIDxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KHtcbiAgY29sbGVjdGlvbixcbiAgY29udGV4dCxcbiAgZGF0YSxcblxuICBkb2M6IGluY29taW5nRG9jLFxuICBnbG9iYWwsXG4gIG9wZXJhdGlvbixcbiAgcHJldmlvdXNEb2MsXG4gIHJlcSxcbn06IEFyZ3M8VD4pOiBQcm9taXNlPFQ+ID0+IHtcbiAgY29uc3QgZG9jID0gZGVlcENvcHlPYmplY3QoaW5jb21pbmdEb2MpXG5cbiAgYXdhaXQgdHJhdmVyc2VGaWVsZHMoe1xuICAgIGNvbGxlY3Rpb24sXG4gICAgY29udGV4dCxcbiAgICBkYXRhLFxuICAgIGRvYyxcbiAgICBmaWVsZHM6IGNvbGxlY3Rpb24/LmZpZWxkcyB8fCBnbG9iYWw/LmZpZWxkcyxcbiAgICBnbG9iYWwsXG4gICAgb3BlcmF0aW9uLFxuICAgIHByZXZpb3VzRG9jLFxuICAgIHByZXZpb3VzU2libGluZ0RvYzogcHJldmlvdXNEb2MsXG4gICAgcmVxLFxuICAgIHNpYmxpbmdEYXRhOiBkYXRhLFxuICAgIHNpYmxpbmdEb2M6IGRvYyxcbiAgfSlcblxuICByZXR1cm4gZG9jXG59XG4iXSwibmFtZXMiOlsiYWZ0ZXJDaGFuZ2UiLCJjb2xsZWN0aW9uIiwiY29udGV4dCIsImRhdGEiLCJkb2MiLCJpbmNvbWluZ0RvYyIsImdsb2JhbCIsIm9wZXJhdGlvbiIsInByZXZpb3VzRG9jIiwicmVxIiwiZGVlcENvcHlPYmplY3QiLCJ0cmF2ZXJzZUZpZWxkcyIsImZpZWxkcyIsInByZXZpb3VzU2libGluZ0RvYyIsInNpYmxpbmdEYXRhIiwic2libGluZ0RvYyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFrQmFBOzs7ZUFBQUE7OztnQ0Fka0I7Z0NBQ0E7QUFheEIsTUFBTUEsY0FBYyxPQUEwQyxFQUNuRUMsVUFBVSxFQUNWQyxPQUFPLEVBQ1BDLElBQUksRUFFSkMsS0FBS0MsV0FBVyxFQUNoQkMsTUFBTSxFQUNOQyxTQUFTLEVBQ1RDLFdBQVcsRUFDWEMsR0FBRyxFQUNLO0lBQ1IsTUFBTUwsTUFBTU0sSUFBQUEsOEJBQWMsRUFBQ0w7SUFFM0IsTUFBTU0sSUFBQUEsOEJBQWMsRUFBQztRQUNuQlY7UUFDQUM7UUFDQUM7UUFDQUM7UUFDQVEsUUFBUVgsWUFBWVcsVUFBVU4sUUFBUU07UUFDdENOO1FBQ0FDO1FBQ0FDO1FBQ0FLLG9CQUFvQkw7UUFDcEJDO1FBQ0FLLGFBQWFYO1FBQ2JZLFlBQVlYO0lBQ2Q7SUFFQSxPQUFPQTtBQUNUIn0=