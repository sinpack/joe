"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "DefaultCollectionEdit", {
    enumerable: true,
    get: function() {
        return DefaultCollectionEdit;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _getTranslation = require("../../../../../../utilities/getTranslation");
const _DocumentControls = require("../../../../elements/DocumentControls");
const _DocumentFields = require("../../../../elements/DocumentFields");
const _LeaveWithoutSaving = require("../../../../modals/LeaveWithoutSaving");
const _Meta = /*#__PURE__*/ _interop_require_default(require("../../../../utilities/Meta"));
const _Auth = /*#__PURE__*/ _interop_require_default(require("../Auth"));
const _SetStepNav = require("../SetStepNav");
const _Upload = require("../Upload");
const _formatFields = /*#__PURE__*/ _interop_require_default(require("../formatFields"));
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'collection-default-edit';
const DefaultCollectionEdit = (props)=>{
    const { i18n, t } = (0, _reacti18next.useTranslation)('general');
    const { id, apiURL, collection, data, disableActions, disableLeaveWithoutSaving, fieldTypes, hasSavePermission, internalState, isEditing, permissions } = props;
    const { auth, upload } = collection;
    const [fields] = (0, _react.useState)(()=>(0, _formatFields.default)(collection, isEditing));
    const operation = isEditing ? 'update' : 'create';
    return /*#__PURE__*/ _react.default.createElement(_react.Fragment, null, /*#__PURE__*/ _react.default.createElement(_Meta.default, {
        description: `${isEditing ? t('editing') : t('creating')} - ${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}`,
        keywords: `${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}, Payload, CMS`,
        title: `${isEditing ? t('editing') : t('creating')} - ${(0, _getTranslation.getTranslation)(collection.labels.singular, i18n)}`
    }), !(collection.versions?.drafts && collection.versions?.drafts?.autosave) && !disableLeaveWithoutSaving && /*#__PURE__*/ _react.default.createElement(_LeaveWithoutSaving.LeaveWithoutSaving, null), /*#__PURE__*/ _react.default.createElement(_SetStepNav.SetStepNav, {
        collection: collection,
        id: id,
        isEditing: isEditing
    }), /*#__PURE__*/ _react.default.createElement(_DocumentControls.DocumentControls, {
        apiURL: apiURL,
        collection: collection,
        data: data,
        disableActions: disableActions,
        hasSavePermission: hasSavePermission,
        id: id,
        isEditing: isEditing,
        permissions: permissions
    }), /*#__PURE__*/ _react.default.createElement(_DocumentFields.DocumentFields, {
        BeforeFields: /*#__PURE__*/ _react.default.createElement(_react.Fragment, null, auth && /*#__PURE__*/ _react.default.createElement(_Auth.default, {
            className: `${baseClass}__auth`,
            collection: collection,
            email: data?.email,
            operation: operation,
            readOnly: !hasSavePermission,
            requirePassword: !isEditing,
            useAPIKey: auth.useAPIKey,
            verify: auth.verify
        }), upload && /*#__PURE__*/ _react.default.createElement(_Upload.Upload, {
            collection: collection,
            internalState: internalState
        })),
        fieldTypes: fieldTypes,
        fields: fields,
        hasSavePermission: hasSavePermission,
        permissions: permissions
    }));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL3ZpZXdzL2NvbGxlY3Rpb25zL0VkaXQvRGVmYXVsdC9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IEZyYWdtZW50LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tICdyZWFjdC1pMThuZXh0J1xuXG5pbXBvcnQgdHlwZSB7IEZpZWxkVHlwZXMgfSBmcm9tICcuLi8uLi8uLi8uLi9mb3Jtcy9maWVsZC10eXBlcydcbmltcG9ydCB0eXBlIHsgQ29sbGVjdGlvbkVkaXRWaWV3UHJvcHMgfSBmcm9tICcuLi8uLi8uLi90eXBlcydcblxuaW1wb3J0IHsgZ2V0VHJhbnNsYXRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi8uLi91dGlsaXRpZXMvZ2V0VHJhbnNsYXRpb24nXG5pbXBvcnQgeyBEb2N1bWVudENvbnRyb2xzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZWxlbWVudHMvRG9jdW1lbnRDb250cm9scydcbmltcG9ydCB7IERvY3VtZW50RmllbGRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZWxlbWVudHMvRG9jdW1lbnRGaWVsZHMnXG5pbXBvcnQgeyBMZWF2ZVdpdGhvdXRTYXZpbmcgfSBmcm9tICcuLi8uLi8uLi8uLi9tb2RhbHMvTGVhdmVXaXRob3V0U2F2aW5nJ1xuaW1wb3J0IE1ldGEgZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL01ldGEnXG5pbXBvcnQgQXV0aCBmcm9tICcuLi9BdXRoJ1xuaW1wb3J0IHsgU2V0U3RlcE5hdiB9IGZyb20gJy4uL1NldFN0ZXBOYXYnXG5pbXBvcnQgeyBVcGxvYWQgfSBmcm9tICcuLi9VcGxvYWQnXG5pbXBvcnQgZm9ybWF0RmllbGRzIGZyb20gJy4uL2Zvcm1hdEZpZWxkcydcbmltcG9ydCAnLi9pbmRleC5zY3NzJ1xuXG5jb25zdCBiYXNlQ2xhc3MgPSAnY29sbGVjdGlvbi1kZWZhdWx0LWVkaXQnXG5cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29sbGVjdGlvbkVkaXQ6IFJlYWN0LkZDPFxuICBDb2xsZWN0aW9uRWRpdFZpZXdQcm9wcyAmIHtcbiAgICBmaWVsZFR5cGVzOiBGaWVsZFR5cGVzXG4gIH1cbj4gPSAocHJvcHMpID0+IHtcbiAgY29uc3QgeyBpMThuLCB0IH0gPSB1c2VUcmFuc2xhdGlvbignZ2VuZXJhbCcpXG5cbiAgY29uc3Qge1xuICAgIGlkLFxuICAgIGFwaVVSTCxcbiAgICBjb2xsZWN0aW9uLFxuICAgIGRhdGEsXG4gICAgZGlzYWJsZUFjdGlvbnMsXG4gICAgZGlzYWJsZUxlYXZlV2l0aG91dFNhdmluZyxcbiAgICBmaWVsZFR5cGVzLFxuICAgIGhhc1NhdmVQZXJtaXNzaW9uLFxuICAgIGludGVybmFsU3RhdGUsXG4gICAgaXNFZGl0aW5nLFxuICAgIHBlcm1pc3Npb25zLFxuICB9ID0gcHJvcHNcblxuICBjb25zdCB7IGF1dGgsIHVwbG9hZCB9ID0gY29sbGVjdGlvblxuXG4gIGNvbnN0IFtmaWVsZHNdID0gdXNlU3RhdGUoKCkgPT4gZm9ybWF0RmllbGRzKGNvbGxlY3Rpb24sIGlzRWRpdGluZykpXG5cbiAgY29uc3Qgb3BlcmF0aW9uID0gaXNFZGl0aW5nID8gJ3VwZGF0ZScgOiAnY3JlYXRlJ1xuXG4gIHJldHVybiAoXG4gICAgPEZyYWdtZW50PlxuICAgICAgPE1ldGFcbiAgICAgICAgZGVzY3JpcHRpb249e2Ake2lzRWRpdGluZyA/IHQoJ2VkaXRpbmcnKSA6IHQoJ2NyZWF0aW5nJyl9IC0gJHtnZXRUcmFuc2xhdGlvbihcbiAgICAgICAgICBjb2xsZWN0aW9uLmxhYmVscy5zaW5ndWxhcixcbiAgICAgICAgICBpMThuLFxuICAgICAgICApfWB9XG4gICAgICAgIGtleXdvcmRzPXtgJHtnZXRUcmFuc2xhdGlvbihjb2xsZWN0aW9uLmxhYmVscy5zaW5ndWxhciwgaTE4bil9LCBQYXlsb2FkLCBDTVNgfVxuICAgICAgICB0aXRsZT17YCR7aXNFZGl0aW5nID8gdCgnZWRpdGluZycpIDogdCgnY3JlYXRpbmcnKX0gLSAke2dldFRyYW5zbGF0aW9uKFxuICAgICAgICAgIGNvbGxlY3Rpb24ubGFiZWxzLnNpbmd1bGFyLFxuICAgICAgICAgIGkxOG4sXG4gICAgICAgICl9YH1cbiAgICAgIC8+XG4gICAgICB7IShjb2xsZWN0aW9uLnZlcnNpb25zPy5kcmFmdHMgJiYgY29sbGVjdGlvbi52ZXJzaW9ucz8uZHJhZnRzPy5hdXRvc2F2ZSkgJiZcbiAgICAgICAgIWRpc2FibGVMZWF2ZVdpdGhvdXRTYXZpbmcgJiYgPExlYXZlV2l0aG91dFNhdmluZyAvPn1cbiAgICAgIDxTZXRTdGVwTmF2IGNvbGxlY3Rpb249e2NvbGxlY3Rpb259IGlkPXtpZH0gaXNFZGl0aW5nPXtpc0VkaXRpbmd9IC8+XG4gICAgICA8RG9jdW1lbnRDb250cm9sc1xuICAgICAgICBhcGlVUkw9e2FwaVVSTH1cbiAgICAgICAgY29sbGVjdGlvbj17Y29sbGVjdGlvbn1cbiAgICAgICAgZGF0YT17ZGF0YX1cbiAgICAgICAgZGlzYWJsZUFjdGlvbnM9e2Rpc2FibGVBY3Rpb25zfVxuICAgICAgICBoYXNTYXZlUGVybWlzc2lvbj17aGFzU2F2ZVBlcm1pc3Npb259XG4gICAgICAgIGlkPXtpZH1cbiAgICAgICAgaXNFZGl0aW5nPXtpc0VkaXRpbmd9XG4gICAgICAgIHBlcm1pc3Npb25zPXtwZXJtaXNzaW9uc31cbiAgICAgIC8+XG4gICAgICA8RG9jdW1lbnRGaWVsZHNcbiAgICAgICAgQmVmb3JlRmllbGRzPXtcbiAgICAgICAgICA8RnJhZ21lbnQ+XG4gICAgICAgICAgICB7YXV0aCAmJiAoXG4gICAgICAgICAgICAgIDxBdXRoXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19hdXRoYH1cbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXtjb2xsZWN0aW9ufVxuICAgICAgICAgICAgICAgIGVtYWlsPXtkYXRhPy5lbWFpbH1cbiAgICAgICAgICAgICAgICBvcGVyYXRpb249e29wZXJhdGlvbn1cbiAgICAgICAgICAgICAgICByZWFkT25seT17IWhhc1NhdmVQZXJtaXNzaW9ufVxuICAgICAgICAgICAgICAgIHJlcXVpcmVQYXNzd29yZD17IWlzRWRpdGluZ31cbiAgICAgICAgICAgICAgICB1c2VBUElLZXk9e2F1dGgudXNlQVBJS2V5fVxuICAgICAgICAgICAgICAgIHZlcmlmeT17YXV0aC52ZXJpZnl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge3VwbG9hZCAmJiA8VXBsb2FkIGNvbGxlY3Rpb249e2NvbGxlY3Rpb259IGludGVybmFsU3RhdGU9e2ludGVybmFsU3RhdGV9IC8+fVxuICAgICAgICAgIDwvRnJhZ21lbnQ+XG4gICAgICAgIH1cbiAgICAgICAgZmllbGRUeXBlcz17ZmllbGRUeXBlc31cbiAgICAgICAgZmllbGRzPXtmaWVsZHN9XG4gICAgICAgIGhhc1NhdmVQZXJtaXNzaW9uPXtoYXNTYXZlUGVybWlzc2lvbn1cbiAgICAgICAgcGVybWlzc2lvbnM9e3Blcm1pc3Npb25zfVxuICAgICAgLz5cbiAgICA8L0ZyYWdtZW50PlxuICApXG59XG4iXSwibmFtZXMiOlsiRGVmYXVsdENvbGxlY3Rpb25FZGl0IiwiYmFzZUNsYXNzIiwicHJvcHMiLCJpMThuIiwidCIsInVzZVRyYW5zbGF0aW9uIiwiaWQiLCJhcGlVUkwiLCJjb2xsZWN0aW9uIiwiZGF0YSIsImRpc2FibGVBY3Rpb25zIiwiZGlzYWJsZUxlYXZlV2l0aG91dFNhdmluZyIsImZpZWxkVHlwZXMiLCJoYXNTYXZlUGVybWlzc2lvbiIsImludGVybmFsU3RhdGUiLCJpc0VkaXRpbmciLCJwZXJtaXNzaW9ucyIsImF1dGgiLCJ1cGxvYWQiLCJmaWVsZHMiLCJ1c2VTdGF0ZSIsImZvcm1hdEZpZWxkcyIsIm9wZXJhdGlvbiIsIkZyYWdtZW50IiwiTWV0YSIsImRlc2NyaXB0aW9uIiwiZ2V0VHJhbnNsYXRpb24iLCJsYWJlbHMiLCJzaW5ndWxhciIsImtleXdvcmRzIiwidGl0bGUiLCJ2ZXJzaW9ucyIsImRyYWZ0cyIsImF1dG9zYXZlIiwiTGVhdmVXaXRob3V0U2F2aW5nIiwiU2V0U3RlcE5hdiIsIkRvY3VtZW50Q29udHJvbHMiLCJEb2N1bWVudEZpZWxkcyIsIkJlZm9yZUZpZWxkcyIsIkF1dGgiLCJjbGFzc05hbWUiLCJlbWFpbCIsInJlYWRPbmx5IiwicmVxdWlyZVBhc3N3b3JkIiwidXNlQVBJS2V5IiwidmVyaWZ5IiwiVXBsb2FkIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFtQmFBOzs7ZUFBQUE7OzsrREFuQjZCOzhCQUNYO2dDQUtBO2tDQUNFO2dDQUNGO29DQUNJOzZEQUNsQjs2REFDQTs0QkFDVTt3QkFDSjtxRUFDRTtRQUNsQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFUCxNQUFNQyxZQUFZO0FBRVgsTUFBTUQsd0JBSVQsQ0FBQ0U7SUFDSCxNQUFNLEVBQUVDLElBQUksRUFBRUMsQ0FBQyxFQUFFLEdBQUdDLElBQUFBLDRCQUFjLEVBQUM7SUFFbkMsTUFBTSxFQUNKQyxFQUFFLEVBQ0ZDLE1BQU0sRUFDTkMsVUFBVSxFQUNWQyxJQUFJLEVBQ0pDLGNBQWMsRUFDZEMseUJBQXlCLEVBQ3pCQyxVQUFVLEVBQ1ZDLGlCQUFpQixFQUNqQkMsYUFBYSxFQUNiQyxTQUFTLEVBQ1RDLFdBQVcsRUFDWixHQUFHZDtJQUVKLE1BQU0sRUFBRWUsSUFBSSxFQUFFQyxNQUFNLEVBQUUsR0FBR1Y7SUFFekIsTUFBTSxDQUFDVyxPQUFPLEdBQUdDLElBQUFBLGVBQVEsRUFBQyxJQUFNQyxJQUFBQSxxQkFBWSxFQUFDYixZQUFZTztJQUV6RCxNQUFNTyxZQUFZUCxZQUFZLFdBQVc7SUFFekMscUJBQ0UsNkJBQUNRLGVBQVEsc0JBQ1AsNkJBQUNDLGFBQUk7UUFDSEMsYUFBYSxDQUFDLEVBQUVWLFlBQVlYLEVBQUUsYUFBYUEsRUFBRSxZQUFZLEdBQUcsRUFBRXNCLElBQUFBLDhCQUFjLEVBQzFFbEIsV0FBV21CLE1BQU0sQ0FBQ0MsUUFBUSxFQUMxQnpCLE1BQ0EsQ0FBQztRQUNIMEIsVUFBVSxDQUFDLEVBQUVILElBQUFBLDhCQUFjLEVBQUNsQixXQUFXbUIsTUFBTSxDQUFDQyxRQUFRLEVBQUV6QixNQUFNLGNBQWMsQ0FBQztRQUM3RTJCLE9BQU8sQ0FBQyxFQUFFZixZQUFZWCxFQUFFLGFBQWFBLEVBQUUsWUFBWSxHQUFHLEVBQUVzQixJQUFBQSw4QkFBYyxFQUNwRWxCLFdBQVdtQixNQUFNLENBQUNDLFFBQVEsRUFDMUJ6QixNQUNBLENBQUM7UUFFSixDQUFFSyxDQUFBQSxXQUFXdUIsUUFBUSxFQUFFQyxVQUFVeEIsV0FBV3VCLFFBQVEsRUFBRUMsUUFBUUMsUUFBTyxLQUNwRSxDQUFDdEIsMkNBQTZCLDZCQUFDdUIsc0NBQWtCLHVCQUNuRCw2QkFBQ0Msc0JBQVU7UUFBQzNCLFlBQVlBO1FBQVlGLElBQUlBO1FBQUlTLFdBQVdBO3NCQUN2RCw2QkFBQ3FCLGtDQUFnQjtRQUNmN0IsUUFBUUE7UUFDUkMsWUFBWUE7UUFDWkMsTUFBTUE7UUFDTkMsZ0JBQWdCQTtRQUNoQkcsbUJBQW1CQTtRQUNuQlAsSUFBSUE7UUFDSlMsV0FBV0E7UUFDWEMsYUFBYUE7c0JBRWYsNkJBQUNxQiw4QkFBYztRQUNiQyw0QkFDRSw2QkFBQ2YsZUFBUSxRQUNOTixzQkFDQyw2QkFBQ3NCLGFBQUk7WUFDSEMsV0FBVyxDQUFDLEVBQUV2QyxVQUFVLE1BQU0sQ0FBQztZQUMvQk8sWUFBWUE7WUFDWmlDLE9BQU9oQyxNQUFNZ0M7WUFDYm5CLFdBQVdBO1lBQ1hvQixVQUFVLENBQUM3QjtZQUNYOEIsaUJBQWlCLENBQUM1QjtZQUNsQjZCLFdBQVczQixLQUFLMkIsU0FBUztZQUN6QkMsUUFBUTVCLEtBQUs0QixNQUFNO1lBR3RCM0Isd0JBQVUsNkJBQUM0QixjQUFNO1lBQUN0QyxZQUFZQTtZQUFZTSxlQUFlQTs7UUFHOURGLFlBQVlBO1FBQ1pPLFFBQVFBO1FBQ1JOLG1CQUFtQkE7UUFDbkJHLGFBQWFBOztBQUlyQiJ9