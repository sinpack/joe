"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _qs = /*#__PURE__*/ _interop_require_default(require("qs"));
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _reacti18next = require("react-i18next");
const _reactrouterdom = require("react-router-dom");
const _flattenTopLevelFields = /*#__PURE__*/ _interop_require_default(require("../../../../utilities/flattenTopLevelFields"));
const _getTranslation = require("../../../../utilities/getTranslation");
const _useThrottledEffect = /*#__PURE__*/ _interop_require_default(require("../../../hooks/useThrottledEffect"));
const _SearchParams = require("../../utilities/SearchParams");
const _Button = /*#__PURE__*/ _interop_require_default(require("../Button"));
const _Condition = /*#__PURE__*/ _interop_require_default(require("./Condition"));
const _fieldtypes = /*#__PURE__*/ _interop_require_default(require("./field-types"));
require("./index.scss");
const _reducer = /*#__PURE__*/ _interop_require_default(require("./reducer"));
const _transformWhereQuery = require("./transformWhereQuery");
const _validateWhereQuery = /*#__PURE__*/ _interop_require_default(require("./validateWhereQuery"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'where-builder';
const reduceFields = (fields, i18n)=>(0, _flattenTopLevelFields.default)(fields).reduce((reduced, field)=>{
        let operators = [];
        if (typeof _fieldtypes.default[field.type] === 'object') {
            if (typeof _fieldtypes.default[field.type].operators === 'function') {
                operators = _fieldtypes.default[field.type].operators('hasMany' in field && field.hasMany ? true : false);
            } else {
                operators = _fieldtypes.default[field.type].operators;
            }
            const operatorKeys = new Set();
            const reducedOperators = operators.reduce((acc, operator)=>{
                if (!operatorKeys.has(operator.value)) {
                    operatorKeys.add(operator.value);
                    return [
                        ...acc,
                        {
                            ...operator,
                            label: i18n.t(`operators:${operator.label}`)
                        }
                    ];
                }
                return acc;
            }, []);
            const formattedField = {
                label: (0, _getTranslation.getTranslation)(field.label || field.name, i18n),
                value: field.name,
                ..._fieldtypes.default[field.type],
                operators: reducedOperators,
                props: {
                    ...field
                }
            };
            if (field.admin && 'disableListFilter' in field.admin && field.admin?.disableListFilter) return reduced;
            return [
                ...reduced,
                formattedField
            ];
        }
        return reduced;
    }, []);
/**
 * The WhereBuilder component is used to render the filter controls for a collection's list view.
 * It is part of the {@link ListControls} component which is used to render the controls (search, filter, where).
 */ const WhereBuilder = (props)=>{
    const { collection: { labels: { plural } = {} } = {}, collection, handleChange, modifySearchQuery = true } = props;
    const history = (0, _reactrouterdom.useHistory)();
    const params = (0, _SearchParams.useSearchParams)();
    const { i18n, t } = (0, _reacti18next.useTranslation)('general');
    // This handles initializing the where conditions from the search query (URL). That way, if you pass in
    // query params to the URL, the where conditions will be initialized from those and displayed in the UI.
    // Example: /admin/collections/posts?where[or][0][and][0][text][equals]=example%20post
    const [conditions, dispatchConditions] = (0, _react.useReducer)(_reducer.default, params.where, (whereFromSearch)=>{
        if (modifySearchQuery && whereFromSearch) {
            if ((0, _validateWhereQuery.default)(whereFromSearch)) {
                return whereFromSearch.or;
            }
            // Transform the where query to be in the right format. This will transform something simple like [text][equals]=example%20post to the right format
            const transformedWhere = (0, _transformWhereQuery.transformWhereQuery)(whereFromSearch);
            if ((0, _validateWhereQuery.default)(transformedWhere)) {
                return transformedWhere.or;
            }
            console.warn('Invalid where query in URL. Ignoring.');
        }
        return [];
    });
    const [reducedFields] = (0, _react.useState)(()=>reduceFields(collection.fields, i18n));
    // This handles updating the search query (URL) when the where conditions change
    (0, _useThrottledEffect.default)(()=>{
        const currentParams = _qs.default.parse(history.location.search, {
            depth: 10,
            ignoreQueryPrefix: true
        });
        const paramsToKeep = typeof currentParams?.where === 'object' && 'or' in currentParams.where ? currentParams.where.or.reduce((keptParams, param)=>{
            const newParam = {
                ...param
            };
            if (param.and) {
                delete newParam.and;
            }
            return [
                ...keptParams,
                newParam
            ];
        }, []) : [];
        const hasNewWhereConditions = conditions.length > 0;
        const newWhereQuery = {
            ...typeof currentParams?.where === 'object' && ((0, _validateWhereQuery.default)(currentParams?.where) || !hasNewWhereConditions) ? currentParams.where : {},
            or: [
                ...conditions,
                ...paramsToKeep
            ]
        };
        const reducedQuery = {
            or: newWhereQuery.or.map((orCondition)=>{
                const andConditions = (orCondition.and || []).map((andCondition)=>{
                    const reducedCondition = {};
                    Object.entries(andCondition).forEach(([fieldName, fieldValue])=>{
                        Object.entries(fieldValue).forEach(([operatorKey, operatorValue])=>{
                            reducedCondition[fieldName] = {};
                            reducedCondition[fieldName][operatorKey] = !operatorValue ? undefined : operatorValue;
                        });
                    });
                    return reducedCondition;
                });
                return {
                    and: andConditions
                };
            })
        };
        if (handleChange) handleChange(newWhereQuery);
        const hasExistingConditions = typeof currentParams?.where === 'object' && 'or' in currentParams.where;
        if (modifySearchQuery && (hasExistingConditions && !hasNewWhereConditions || hasNewWhereConditions)) {
            history.replace({
                search: _qs.default.stringify({
                    ...currentParams,
                    page: 1,
                    where: reducedQuery
                }, {
                    addQueryPrefix: true
                })
            });
        }
    }, 500, [
        conditions,
        modifySearchQuery,
        handleChange
    ]);
    return /*#__PURE__*/ _react.default.createElement("div", {
        className: baseClass
    }, conditions.length > 0 && /*#__PURE__*/ _react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__label`
    }, t('filterWhere', {
        label: (0, _getTranslation.getTranslation)(plural, i18n)
    })), /*#__PURE__*/ _react.default.createElement("ul", {
        className: `${baseClass}__or-filters`
    }, conditions.map((or, orIndex)=>/*#__PURE__*/ _react.default.createElement("li", {
            key: orIndex
        }, orIndex !== 0 && /*#__PURE__*/ _react.default.createElement("div", {
            className: `${baseClass}__label`
        }, t('or')), /*#__PURE__*/ _react.default.createElement("ul", {
            className: `${baseClass}__and-filters`
        }, Array.isArray(or?.and) && or.and.map((_, andIndex)=>/*#__PURE__*/ _react.default.createElement("li", {
                key: andIndex
            }, andIndex !== 0 && /*#__PURE__*/ _react.default.createElement("div", {
                className: `${baseClass}__label`
            }, t('and')), /*#__PURE__*/ _react.default.createElement(_Condition.default, {
                andIndex: andIndex,
                dispatch: dispatchConditions,
                fields: reducedFields,
                key: andIndex,
                orIndex: orIndex,
                value: conditions[orIndex].and[andIndex]
            }))))))), /*#__PURE__*/ _react.default.createElement(_Button.default, {
        buttonStyle: "icon-label",
        className: `${baseClass}__add-or`,
        icon: "plus",
        iconPosition: "left",
        iconStyle: "with-border",
        onClick: ()=>{
            if (reducedFields.length > 0) dispatchConditions({
                type: 'add',
                field: reducedFields[0].value
            });
        }
    }, t('or'))), conditions.length === 0 && /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__no-filters`
    }, /*#__PURE__*/ _react.default.createElement("div", {
        className: `${baseClass}__label`
    }, t('noFiltersSet')), /*#__PURE__*/ _react.default.createElement(_Button.default, {
        buttonStyle: "icon-label",
        className: `${baseClass}__add-first-filter`,
        icon: "plus",
        iconPosition: "left",
        iconStyle: "with-border",
        onClick: ()=>{
            if (reducedFields.length > 0) dispatchConditions({
                type: 'add',
                field: reducedFields[0].value
            });
        }
    }, t('addFilter'))));
};
const _default = WhereBuilder;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL2VsZW1lbnRzL1doZXJlQnVpbGRlci9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHF1ZXJ5U3RyaW5nIGZyb20gJ3FzJ1xuaW1wb3J0IFJlYWN0LCB7IHVzZVJlZHVjZXIsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gJ3JlYWN0LWkxOG5leHQnXG5pbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcblxuaW1wb3J0IHR5cGUgeyBXaGVyZSB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBQcm9wcyB9IGZyb20gJy4vdHlwZXMnXG5cbmltcG9ydCBmbGF0dGVuVG9wTGV2ZWxGaWVsZHMgZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL2ZsYXR0ZW5Ub3BMZXZlbEZpZWxkcydcbmltcG9ydCB7IGdldFRyYW5zbGF0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0aWVzL2dldFRyYW5zbGF0aW9uJ1xuaW1wb3J0IHVzZVRocm90dGxlZEVmZmVjdCBmcm9tICcuLi8uLi8uLi9ob29rcy91c2VUaHJvdHRsZWRFZmZlY3QnXG5pbXBvcnQgeyB1c2VTZWFyY2hQYXJhbXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvU2VhcmNoUGFyYW1zJ1xuaW1wb3J0IEJ1dHRvbiBmcm9tICcuLi9CdXR0b24nXG5pbXBvcnQgQ29uZGl0aW9uIGZyb20gJy4vQ29uZGl0aW9uJ1xuaW1wb3J0IGZpZWxkVHlwZXMgZnJvbSAnLi9maWVsZC10eXBlcydcbmltcG9ydCAnLi9pbmRleC5zY3NzJ1xuaW1wb3J0IHJlZHVjZXIgZnJvbSAnLi9yZWR1Y2VyJ1xuaW1wb3J0IHsgdHJhbnNmb3JtV2hlcmVRdWVyeSB9IGZyb20gJy4vdHJhbnNmb3JtV2hlcmVRdWVyeSdcbmltcG9ydCB2YWxpZGF0ZVdoZXJlUXVlcnkgZnJvbSAnLi92YWxpZGF0ZVdoZXJlUXVlcnknXG5cbmNvbnN0IGJhc2VDbGFzcyA9ICd3aGVyZS1idWlsZGVyJ1xuXG5jb25zdCByZWR1Y2VGaWVsZHMgPSAoZmllbGRzLCBpMThuKSA9PlxuICBmbGF0dGVuVG9wTGV2ZWxGaWVsZHMoZmllbGRzKS5yZWR1Y2UoKHJlZHVjZWQsIGZpZWxkKSA9PiB7XG4gICAgbGV0IG9wZXJhdG9ycyA9IFtdXG5cbiAgICBpZiAodHlwZW9mIGZpZWxkVHlwZXNbZmllbGQudHlwZV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAodHlwZW9mIGZpZWxkVHlwZXNbZmllbGQudHlwZV0ub3BlcmF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9wZXJhdG9ycyA9IGZpZWxkVHlwZXNbZmllbGQudHlwZV0ub3BlcmF0b3JzKFxuICAgICAgICAgICdoYXNNYW55JyBpbiBmaWVsZCAmJiBmaWVsZC5oYXNNYW55ID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGVyYXRvcnMgPSBmaWVsZFR5cGVzW2ZpZWxkLnR5cGVdLm9wZXJhdG9yc1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvcGVyYXRvcktleXMgPSBuZXcgU2V0KClcbiAgICAgIGNvbnN0IHJlZHVjZWRPcGVyYXRvcnMgPSBvcGVyYXRvcnMucmVkdWNlKChhY2MsIG9wZXJhdG9yKSA9PiB7XG4gICAgICAgIGlmICghb3BlcmF0b3JLZXlzLmhhcyhvcGVyYXRvci52YWx1ZSkpIHtcbiAgICAgICAgICBvcGVyYXRvcktleXMuYWRkKG9wZXJhdG9yLnZhbHVlKVxuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC4uLm9wZXJhdG9yLFxuICAgICAgICAgICAgICBsYWJlbDogaTE4bi50KGBvcGVyYXRvcnM6JHtvcGVyYXRvci5sYWJlbH1gKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2NcbiAgICAgIH0sIFtdKVxuXG4gICAgICBjb25zdCBmb3JtYXR0ZWRGaWVsZCA9IHtcbiAgICAgICAgbGFiZWw6IGdldFRyYW5zbGF0aW9uKGZpZWxkLmxhYmVsIHx8IGZpZWxkLm5hbWUsIGkxOG4pLFxuICAgICAgICB2YWx1ZTogZmllbGQubmFtZSxcbiAgICAgICAgLi4uZmllbGRUeXBlc1tmaWVsZC50eXBlXSxcbiAgICAgICAgb3BlcmF0b3JzOiByZWR1Y2VkT3BlcmF0b3JzLFxuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIC4uLmZpZWxkLFxuICAgICAgICB9LFxuICAgICAgfVxuXG4gICAgICBpZiAoZmllbGQuYWRtaW4gJiYgJ2Rpc2FibGVMaXN0RmlsdGVyJyBpbiBmaWVsZC5hZG1pbiAmJiBmaWVsZC5hZG1pbj8uZGlzYWJsZUxpc3RGaWx0ZXIpXG4gICAgICAgIHJldHVybiByZWR1Y2VkXG5cbiAgICAgIHJldHVybiBbLi4ucmVkdWNlZCwgZm9ybWF0dGVkRmllbGRdXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZHVjZWRcbiAgfSwgW10pXG5cbi8qKlxuICogVGhlIFdoZXJlQnVpbGRlciBjb21wb25lbnQgaXMgdXNlZCB0byByZW5kZXIgdGhlIGZpbHRlciBjb250cm9scyBmb3IgYSBjb2xsZWN0aW9uJ3MgbGlzdCB2aWV3LlxuICogSXQgaXMgcGFydCBvZiB0aGUge0BsaW5rIExpc3RDb250cm9sc30gY29tcG9uZW50IHdoaWNoIGlzIHVzZWQgdG8gcmVuZGVyIHRoZSBjb250cm9scyAoc2VhcmNoLCBmaWx0ZXIsIHdoZXJlKS5cbiAqL1xuY29uc3QgV2hlcmVCdWlsZGVyOiBSZWFjdC5GQzxQcm9wcz4gPSAocHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGNvbGxlY3Rpb246IHsgbGFiZWxzOiB7IHBsdXJhbCB9ID0ge30gfSA9IHt9LFxuICAgIGNvbGxlY3Rpb24sXG4gICAgaGFuZGxlQ2hhbmdlLFxuICAgIG1vZGlmeVNlYXJjaFF1ZXJ5ID0gdHJ1ZSxcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgaGlzdG9yeSA9IHVzZUhpc3RvcnkoKVxuICBjb25zdCBwYXJhbXMgPSB1c2VTZWFyY2hQYXJhbXMoKVxuICBjb25zdCB7IGkxOG4sIHQgfSA9IHVzZVRyYW5zbGF0aW9uKCdnZW5lcmFsJylcblxuICAvLyBUaGlzIGhhbmRsZXMgaW5pdGlhbGl6aW5nIHRoZSB3aGVyZSBjb25kaXRpb25zIGZyb20gdGhlIHNlYXJjaCBxdWVyeSAoVVJMKS4gVGhhdCB3YXksIGlmIHlvdSBwYXNzIGluXG4gIC8vIHF1ZXJ5IHBhcmFtcyB0byB0aGUgVVJMLCB0aGUgd2hlcmUgY29uZGl0aW9ucyB3aWxsIGJlIGluaXRpYWxpemVkIGZyb20gdGhvc2UgYW5kIGRpc3BsYXllZCBpbiB0aGUgVUkuXG4gIC8vIEV4YW1wbGU6IC9hZG1pbi9jb2xsZWN0aW9ucy9wb3N0cz93aGVyZVtvcl1bMF1bYW5kXVswXVt0ZXh0XVtlcXVhbHNdPWV4YW1wbGUlMjBwb3N0XG4gIGNvbnN0IFtjb25kaXRpb25zLCBkaXNwYXRjaENvbmRpdGlvbnNdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBwYXJhbXMud2hlcmUsICh3aGVyZUZyb21TZWFyY2gpID0+IHtcbiAgICBpZiAobW9kaWZ5U2VhcmNoUXVlcnkgJiYgd2hlcmVGcm9tU2VhcmNoKSB7XG4gICAgICBpZiAodmFsaWRhdGVXaGVyZVF1ZXJ5KHdoZXJlRnJvbVNlYXJjaCkpIHtcbiAgICAgICAgcmV0dXJuIHdoZXJlRnJvbVNlYXJjaC5vclxuICAgICAgfVxuXG4gICAgICAvLyBUcmFuc2Zvcm0gdGhlIHdoZXJlIHF1ZXJ5IHRvIGJlIGluIHRoZSByaWdodCBmb3JtYXQuIFRoaXMgd2lsbCB0cmFuc2Zvcm0gc29tZXRoaW5nIHNpbXBsZSBsaWtlIFt0ZXh0XVtlcXVhbHNdPWV4YW1wbGUlMjBwb3N0IHRvIHRoZSByaWdodCBmb3JtYXRcbiAgICAgIGNvbnN0IHRyYW5zZm9ybWVkV2hlcmUgPSB0cmFuc2Zvcm1XaGVyZVF1ZXJ5KHdoZXJlRnJvbVNlYXJjaClcblxuICAgICAgaWYgKHZhbGlkYXRlV2hlcmVRdWVyeSh0cmFuc2Zvcm1lZFdoZXJlKSkge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRXaGVyZS5vclxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgd2hlcmUgcXVlcnkgaW4gVVJMLiBJZ25vcmluZy4nKVxuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfSlcblxuICBjb25zdCBbcmVkdWNlZEZpZWxkc10gPSB1c2VTdGF0ZSgoKSA9PiByZWR1Y2VGaWVsZHMoY29sbGVjdGlvbi5maWVsZHMsIGkxOG4pKVxuXG4gIC8vIFRoaXMgaGFuZGxlcyB1cGRhdGluZyB0aGUgc2VhcmNoIHF1ZXJ5IChVUkwpIHdoZW4gdGhlIHdoZXJlIGNvbmRpdGlvbnMgY2hhbmdlXG4gIHVzZVRocm90dGxlZEVmZmVjdChcbiAgICAoKSA9PiB7XG4gICAgICBjb25zdCBjdXJyZW50UGFyYW1zID0gcXVlcnlTdHJpbmcucGFyc2UoaGlzdG9yeS5sb2NhdGlvbi5zZWFyY2gsIHtcbiAgICAgICAgZGVwdGg6IDEwLFxuICAgICAgICBpZ25vcmVRdWVyeVByZWZpeDogdHJ1ZSxcbiAgICAgIH0pIGFzIHsgd2hlcmU6IFdoZXJlIH1cblxuICAgICAgY29uc3QgcGFyYW1zVG9LZWVwID1cbiAgICAgICAgdHlwZW9mIGN1cnJlbnRQYXJhbXM/LndoZXJlID09PSAnb2JqZWN0JyAmJiAnb3InIGluIGN1cnJlbnRQYXJhbXMud2hlcmVcbiAgICAgICAgICA/IGN1cnJlbnRQYXJhbXMud2hlcmUub3IucmVkdWNlKChrZXB0UGFyYW1zLCBwYXJhbSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBuZXdQYXJhbSA9IHsgLi4ucGFyYW0gfVxuICAgICAgICAgICAgICBpZiAocGFyYW0uYW5kKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG5ld1BhcmFtLmFuZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBbLi4ua2VwdFBhcmFtcywgbmV3UGFyYW1dXG4gICAgICAgICAgICB9LCBbXSlcbiAgICAgICAgICA6IFtdXG5cbiAgICAgIGNvbnN0IGhhc05ld1doZXJlQ29uZGl0aW9ucyA9IGNvbmRpdGlvbnMubGVuZ3RoID4gMFxuXG4gICAgICBjb25zdCBuZXdXaGVyZVF1ZXJ5ID0ge1xuICAgICAgICAuLi4odHlwZW9mIGN1cnJlbnRQYXJhbXM/LndoZXJlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAodmFsaWRhdGVXaGVyZVF1ZXJ5KGN1cnJlbnRQYXJhbXM/LndoZXJlKSB8fCAhaGFzTmV3V2hlcmVDb25kaXRpb25zKVxuICAgICAgICAgID8gY3VycmVudFBhcmFtcy53aGVyZVxuICAgICAgICAgIDoge30pLFxuICAgICAgICBvcjogWy4uLmNvbmRpdGlvbnMsIC4uLnBhcmFtc1RvS2VlcF0sXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlZHVjZWRRdWVyeSA9IHtcbiAgICAgICAgb3I6IG5ld1doZXJlUXVlcnkub3IubWFwKChvckNvbmRpdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGFuZENvbmRpdGlvbnMgPSAob3JDb25kaXRpb24uYW5kIHx8IFtdKS5tYXAoKGFuZENvbmRpdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVkdWNlZENvbmRpdGlvbiA9IHt9XG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhhbmRDb25kaXRpb24pLmZvckVhY2goKFtmaWVsZE5hbWUsIGZpZWxkVmFsdWVdKSA9PiB7XG4gICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGZpZWxkVmFsdWUpLmZvckVhY2goKFtvcGVyYXRvcktleSwgb3BlcmF0b3JWYWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICByZWR1Y2VkQ29uZGl0aW9uW2ZpZWxkTmFtZV0gPSB7fVxuICAgICAgICAgICAgICAgIHJlZHVjZWRDb25kaXRpb25bZmllbGROYW1lXVtvcGVyYXRvcktleV0gPSAhb3BlcmF0b3JWYWx1ZVxuICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgIDogb3BlcmF0b3JWYWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkQ29uZGl0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW5kOiBhbmRDb25kaXRpb25zLFxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICB9XG5cbiAgICAgIGlmIChoYW5kbGVDaGFuZ2UpIGhhbmRsZUNoYW5nZShuZXdXaGVyZVF1ZXJ5IGFzIFdoZXJlKVxuXG4gICAgICBjb25zdCBoYXNFeGlzdGluZ0NvbmRpdGlvbnMgPVxuICAgICAgICB0eXBlb2YgY3VycmVudFBhcmFtcz8ud2hlcmUgPT09ICdvYmplY3QnICYmICdvcicgaW4gY3VycmVudFBhcmFtcy53aGVyZVxuXG4gICAgICBpZiAoXG4gICAgICAgIG1vZGlmeVNlYXJjaFF1ZXJ5ICYmXG4gICAgICAgICgoaGFzRXhpc3RpbmdDb25kaXRpb25zICYmICFoYXNOZXdXaGVyZUNvbmRpdGlvbnMpIHx8IGhhc05ld1doZXJlQ29uZGl0aW9ucylcbiAgICAgICkge1xuICAgICAgICBoaXN0b3J5LnJlcGxhY2Uoe1xuICAgICAgICAgIHNlYXJjaDogcXVlcnlTdHJpbmcuc3RyaW5naWZ5KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAuLi5jdXJyZW50UGFyYW1zLFxuICAgICAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgICAgICB3aGVyZTogcmVkdWNlZFF1ZXJ5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgYWRkUXVlcnlQcmVmaXg6IHRydWUgfSxcbiAgICAgICAgICApLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0sXG4gICAgNTAwLFxuICAgIFtjb25kaXRpb25zLCBtb2RpZnlTZWFyY2hRdWVyeSwgaGFuZGxlQ2hhbmdlXSxcbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2Jhc2VDbGFzc30+XG4gICAgICB7Y29uZGl0aW9ucy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19sYWJlbGB9PlxuICAgICAgICAgICAge3QoJ2ZpbHRlcldoZXJlJywgeyBsYWJlbDogZ2V0VHJhbnNsYXRpb24ocGx1cmFsLCBpMThuKSB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8dWwgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19vci1maWx0ZXJzYH0+XG4gICAgICAgICAgICB7Y29uZGl0aW9ucy5tYXAoKG9yLCBvckluZGV4KSA9PiAoXG4gICAgICAgICAgICAgIDxsaSBrZXk9e29ySW5kZXh9PlxuICAgICAgICAgICAgICAgIHtvckluZGV4ICE9PSAwICYmIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19sYWJlbGB9Pnt0KCdvcicpfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19hbmQtZmlsdGVyc2B9PlxuICAgICAgICAgICAgICAgICAge0FycmF5LmlzQXJyYXkob3I/LmFuZCkgJiZcbiAgICAgICAgICAgICAgICAgICAgb3IuYW5kLm1hcCgoXywgYW5kSW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8bGkga2V5PXthbmRJbmRleH0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YW5kSW5kZXggIT09IDAgJiYgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2xhYmVsYH0+e3QoJ2FuZCcpfTwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb25kaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgYW5kSW5kZXg9e2FuZEluZGV4fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaD17ZGlzcGF0Y2hDb25kaXRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM9e3JlZHVjZWRGaWVsZHN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17YW5kSW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9ySW5kZXg9e29ySW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb25kaXRpb25zW29ySW5kZXhdLmFuZFthbmRJbmRleF19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L3VsPlxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwiaWNvbi1sYWJlbFwiXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2FkZC1vcmB9XG4gICAgICAgICAgICBpY29uPVwicGx1c1wiXG4gICAgICAgICAgICBpY29uUG9zaXRpb249XCJsZWZ0XCJcbiAgICAgICAgICAgIGljb25TdHlsZT1cIndpdGgtYm9yZGVyXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJlZHVjZWRGaWVsZHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICBkaXNwYXRjaENvbmRpdGlvbnMoeyB0eXBlOiAnYWRkJywgZmllbGQ6IHJlZHVjZWRGaWVsZHNbMF0udmFsdWUgfSlcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3QoJ29yJyl9XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICApfVxuICAgICAge2NvbmRpdGlvbnMubGVuZ3RoID09PSAwICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX25vLWZpbHRlcnNgfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fbGFiZWxgfT57dCgnbm9GaWx0ZXJzU2V0Jyl9PC9kaXY+XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgYnV0dG9uU3R5bGU9XCJpY29uLWxhYmVsXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7YmFzZUNsYXNzfV9fYWRkLWZpcnN0LWZpbHRlcmB9XG4gICAgICAgICAgICBpY29uPVwicGx1c1wiXG4gICAgICAgICAgICBpY29uUG9zaXRpb249XCJsZWZ0XCJcbiAgICAgICAgICAgIGljb25TdHlsZT1cIndpdGgtYm9yZGVyXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHJlZHVjZWRGaWVsZHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICBkaXNwYXRjaENvbmRpdGlvbnMoeyB0eXBlOiAnYWRkJywgZmllbGQ6IHJlZHVjZWRGaWVsZHNbMF0udmFsdWUgfSlcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3QoJ2FkZEZpbHRlcicpfVxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgV2hlcmVCdWlsZGVyXG4iXSwibmFtZXMiOlsiYmFzZUNsYXNzIiwicmVkdWNlRmllbGRzIiwiZmllbGRzIiwiaTE4biIsImZsYXR0ZW5Ub3BMZXZlbEZpZWxkcyIsInJlZHVjZSIsInJlZHVjZWQiLCJmaWVsZCIsIm9wZXJhdG9ycyIsImZpZWxkVHlwZXMiLCJ0eXBlIiwiaGFzTWFueSIsIm9wZXJhdG9yS2V5cyIsIlNldCIsInJlZHVjZWRPcGVyYXRvcnMiLCJhY2MiLCJvcGVyYXRvciIsImhhcyIsInZhbHVlIiwiYWRkIiwibGFiZWwiLCJ0IiwiZm9ybWF0dGVkRmllbGQiLCJnZXRUcmFuc2xhdGlvbiIsIm5hbWUiLCJwcm9wcyIsImFkbWluIiwiZGlzYWJsZUxpc3RGaWx0ZXIiLCJXaGVyZUJ1aWxkZXIiLCJjb2xsZWN0aW9uIiwibGFiZWxzIiwicGx1cmFsIiwiaGFuZGxlQ2hhbmdlIiwibW9kaWZ5U2VhcmNoUXVlcnkiLCJoaXN0b3J5IiwidXNlSGlzdG9yeSIsInBhcmFtcyIsInVzZVNlYXJjaFBhcmFtcyIsInVzZVRyYW5zbGF0aW9uIiwiY29uZGl0aW9ucyIsImRpc3BhdGNoQ29uZGl0aW9ucyIsInVzZVJlZHVjZXIiLCJyZWR1Y2VyIiwid2hlcmUiLCJ3aGVyZUZyb21TZWFyY2giLCJ2YWxpZGF0ZVdoZXJlUXVlcnkiLCJvciIsInRyYW5zZm9ybWVkV2hlcmUiLCJ0cmFuc2Zvcm1XaGVyZVF1ZXJ5IiwiY29uc29sZSIsIndhcm4iLCJyZWR1Y2VkRmllbGRzIiwidXNlU3RhdGUiLCJ1c2VUaHJvdHRsZWRFZmZlY3QiLCJjdXJyZW50UGFyYW1zIiwicXVlcnlTdHJpbmciLCJwYXJzZSIsImxvY2F0aW9uIiwic2VhcmNoIiwiZGVwdGgiLCJpZ25vcmVRdWVyeVByZWZpeCIsInBhcmFtc1RvS2VlcCIsImtlcHRQYXJhbXMiLCJwYXJhbSIsIm5ld1BhcmFtIiwiYW5kIiwiaGFzTmV3V2hlcmVDb25kaXRpb25zIiwibGVuZ3RoIiwibmV3V2hlcmVRdWVyeSIsInJlZHVjZWRRdWVyeSIsIm1hcCIsIm9yQ29uZGl0aW9uIiwiYW5kQ29uZGl0aW9ucyIsImFuZENvbmRpdGlvbiIsInJlZHVjZWRDb25kaXRpb24iLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImZpZWxkTmFtZSIsImZpZWxkVmFsdWUiLCJvcGVyYXRvcktleSIsIm9wZXJhdG9yVmFsdWUiLCJ1bmRlZmluZWQiLCJoYXNFeGlzdGluZ0NvbmRpdGlvbnMiLCJyZXBsYWNlIiwic3RyaW5naWZ5IiwicGFnZSIsImFkZFF1ZXJ5UHJlZml4IiwiZGl2IiwiY2xhc3NOYW1lIiwiUmVhY3QiLCJGcmFnbWVudCIsInVsIiwib3JJbmRleCIsImxpIiwia2V5IiwiQXJyYXkiLCJpc0FycmF5IiwiXyIsImFuZEluZGV4IiwiQ29uZGl0aW9uIiwiZGlzcGF0Y2giLCJCdXR0b24iLCJidXR0b25TdHlsZSIsImljb24iLCJpY29uUG9zaXRpb24iLCJpY29uU3R5bGUiLCJvbkNsaWNrIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBeVBBOzs7ZUFBQTs7OzJEQXpQd0I7K0RBQ29COzhCQUNiO2dDQUNKOzhFQUtPO2dDQUNIOzJFQUNBOzhCQUNDOytEQUNiO2tFQUNHO21FQUNDO1FBQ2hCO2dFQUNhO3FDQUNnQjsyRUFDTDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFL0IsTUFBTUEsWUFBWTtBQUVsQixNQUFNQyxlQUFlLENBQUNDLFFBQVFDLE9BQzVCQyxJQUFBQSw4QkFBcUIsRUFBQ0YsUUFBUUcsTUFBTSxDQUFDLENBQUNDLFNBQVNDO1FBQzdDLElBQUlDLFlBQVksRUFBRTtRQUVsQixJQUFJLE9BQU9DLG1CQUFVLENBQUNGLE1BQU1HLElBQUksQ0FBQyxLQUFLLFVBQVU7WUFDOUMsSUFBSSxPQUFPRCxtQkFBVSxDQUFDRixNQUFNRyxJQUFJLENBQUMsQ0FBQ0YsU0FBUyxLQUFLLFlBQVk7Z0JBQzFE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