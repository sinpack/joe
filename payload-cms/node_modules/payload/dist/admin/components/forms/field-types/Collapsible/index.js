"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _Collapsible = require("../../../elements/Collapsible");
const _ErrorPill = require("../../../elements/ErrorPill");
const _DocumentInfo = require("../../../utilities/DocumentInfo");
const _Preferences = require("../../../utilities/Preferences");
const _FieldDescription = /*#__PURE__*/ _interop_require_default(require("../../FieldDescription"));
const _context = require("../../Form/context");
const _createNestedFieldPath = require("../../Form/createNestedFieldPath");
const _RenderFields = /*#__PURE__*/ _interop_require_default(require("../../RenderFields"));
const _RowLabel = require("../../RowLabel");
const _WatchChildErrors = require("../../WatchChildErrors");
const _withCondition = /*#__PURE__*/ _interop_require_default(require("../../withCondition"));
const _shared = require("../shared");
require("./index.scss");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const baseClass = 'collapsible-field';
const CollapsibleField = (props)=>{
    const { admin: { className, description, initCollapsed, readOnly }, fieldTypes, fields, indexPath, label, path, permissions } = props;
    const { getPreference, setPreference } = (0, _Preferences.usePreferences)();
    const { preferencesKey } = (0, _DocumentInfo.useDocumentInfo)();
    const [collapsedOnMount, setCollapsedOnMount] = (0, _react.useState)();
    const fieldPreferencesKey = `collapsible-${indexPath.replace(/\./g, '__')}`;
    const [errorCount, setErrorCount] = (0, _react.useState)(0);
    const submitted = (0, _context.useFormSubmitted)();
    const onToggle = (0, _react.useCallback)(async (newCollapsedState)=>{
        const existingPreferences = await getPreference(preferencesKey);
        if (preferencesKey) {
            await setPreference(preferencesKey, {
                ...existingPreferences,
                ...path ? {
                    fields: {
                        ...existingPreferences?.fields || {},
                        [path]: {
                            ...existingPreferences?.fields?.[path],
                            collapsed: newCollapsedState
                        }
                    }
                } : {
                    fields: {
                        ...existingPreferences?.fields || {},
                        [fieldPreferencesKey]: {
                            ...existingPreferences?.fields?.[fieldPreferencesKey],
                            collapsed: newCollapsedState
                        }
                    }
                }
            });
        }
    }, [
        preferencesKey,
        fieldPreferencesKey,
        getPreference,
        setPreference,
        path
    ]);
    (0, _react.useEffect)(()=>{
        const fetchInitialState = async ()=>{
            if (preferencesKey) {
                const preferences = await getPreference(preferencesKey);
                const specificPreference = path ? preferences?.fields?.[path]?.collapsed : preferences?.fields?.[fieldPreferencesKey]?.collapsed;
                if (specificPreference !== undefined) {
                    setCollapsedOnMount(Boolean(specificPreference));
                } else {
                    setCollapsedOnMount(typeof initCollapsed === 'boolean' ? initCollapsed : false);
                }
            } else {
                setCollapsedOnMount(typeof initCollapsed === 'boolean' ? initCollapsed : false);
            }
        };
        void fetchInitialState();
    }, [
        getPreference,
        preferencesKey,
        fieldPreferencesKey,
        initCollapsed,
        path
    ]);
    if (typeof collapsedOnMount !== 'boolean') return null;
    const fieldHasErrors = submitted && errorCount > 0;
    return /*#__PURE__*/ _react.default.createElement("div", {
        className: [
            _shared.fieldBaseClass,
            baseClass,
            className,
            fieldHasErrors ? `${baseClass}--has-error` : `${baseClass}--has-no-error`
        ].filter(Boolean).join(' '),
        id: `field-${fieldPreferencesKey}${path ? `-${path.replace(/\./g, '__')}` : ''}`
    }, /*#__PURE__*/ _react.default.createElement(_WatchChildErrors.WatchChildErrors, {
        fieldSchema: fields,
        path: path,
        setErrorCount: setErrorCount
    }), /*#__PURE__*/ _react.default.createElement(_Collapsible.Collapsible, {
        className: `${baseClass}__collapsible`,
        collapsibleStyle: errorCount > 0 ? 'error' : 'default',
        header: /*#__PURE__*/ _react.default.createElement("div", {
            className: `${baseClass}__row-label-wrap`
        }, /*#__PURE__*/ _react.default.createElement(_RowLabel.RowLabel, {
            label: label,
            path: path
        }), errorCount > 0 && /*#__PURE__*/ _react.default.createElement(_ErrorPill.ErrorPill, {
            count: errorCount,
            withMessage: true
        })),
        initCollapsed: collapsedOnMount,
        onToggle: onToggle
    }, /*#__PURE__*/ _react.default.createElement(_RenderFields.default, {
        fieldSchema: fields.map((field)=>({
                ...field,
                path: (0, _createNestedFieldPath.createNestedFieldPath)(path, field)
            })),
        fieldTypes: fieldTypes,
        forceRender: true,
        indexPath: indexPath,
        margins: "small",
        permissions: permissions,
        readOnly: readOnly
    })), /*#__PURE__*/ _react.default.createElement(_FieldDescription.default, {
        description: description,
        path: path
    }));
};
const _default = (0, _withCondition.default)(CollapsibleField);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9hZG1pbi9jb21wb25lbnRzL2Zvcm1zL2ZpZWxkLXR5cGVzL0NvbGxhcHNpYmxlL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHR5cGUgeyBEb2N1bWVudFByZWZlcmVuY2VzIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcHJlZmVyZW5jZXMvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IFByb3BzIH0gZnJvbSAnLi90eXBlcydcblxuaW1wb3J0IHsgQ29sbGFwc2libGUgfSBmcm9tICcuLi8uLi8uLi9lbGVtZW50cy9Db2xsYXBzaWJsZSdcbmltcG9ydCB7IEVycm9yUGlsbCB9IGZyb20gJy4uLy4uLy4uL2VsZW1lbnRzL0Vycm9yUGlsbCdcbmltcG9ydCB7IHVzZURvY3VtZW50SW5mbyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9Eb2N1bWVudEluZm8nXG5pbXBvcnQgeyB1c2VQcmVmZXJlbmNlcyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcy9QcmVmZXJlbmNlcydcbmltcG9ydCBGaWVsZERlc2NyaXB0aW9uIGZyb20gJy4uLy4uL0ZpZWxkRGVzY3JpcHRpb24nXG5pbXBvcnQgeyB1c2VGb3JtU3VibWl0dGVkIH0gZnJvbSAnLi4vLi4vRm9ybS9jb250ZXh0J1xuaW1wb3J0IHsgY3JlYXRlTmVzdGVkRmllbGRQYXRoIH0gZnJvbSAnLi4vLi4vRm9ybS9jcmVhdGVOZXN0ZWRGaWVsZFBhdGgnXG5pbXBvcnQgUmVuZGVyRmllbGRzIGZyb20gJy4uLy4uL1JlbmRlckZpZWxkcydcbmltcG9ydCB7IFJvd0xhYmVsIH0gZnJvbSAnLi4vLi4vUm93TGFiZWwnXG5pbXBvcnQgeyBXYXRjaENoaWxkRXJyb3JzIH0gZnJvbSAnLi4vLi4vV2F0Y2hDaGlsZEVycm9ycydcbmltcG9ydCB3aXRoQ29uZGl0aW9uIGZyb20gJy4uLy4uL3dpdGhDb25kaXRpb24nXG5pbXBvcnQgeyBmaWVsZEJhc2VDbGFzcyB9IGZyb20gJy4uL3NoYXJlZCdcbmltcG9ydCAnLi9pbmRleC5zY3NzJ1xuXG5jb25zdCBiYXNlQ2xhc3MgPSAnY29sbGFwc2libGUtZmllbGQnXG5cbmNvbnN0IENvbGxhcHNpYmxlRmllbGQ6IFJlYWN0LkZDPFByb3BzPiA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgYWRtaW46IHsgY2xhc3NOYW1lLCBkZXNjcmlwdGlvbiwgaW5pdENvbGxhcHNlZCwgcmVhZE9ubHkgfSxcbiAgICBmaWVsZFR5cGVzLFxuICAgIGZpZWxkcyxcbiAgICBpbmRleFBhdGgsXG4gICAgbGFiZWwsXG4gICAgcGF0aCxcbiAgICBwZXJtaXNzaW9ucyxcbiAgfSA9IHByb3BzXG5cbiAgY29uc3QgeyBnZXRQcmVmZXJlbmNlLCBzZXRQcmVmZXJlbmNlIH0gPSB1c2VQcmVmZXJlbmNlcygpXG4gIGNvbnN0IHsgcHJlZmVyZW5jZXNLZXkgfSA9IHVzZURvY3VtZW50SW5mbygpXG4gIGNvbnN0IFtjb2xsYXBzZWRPbk1vdW50LCBzZXRDb2xsYXBzZWRPbk1vdW50XSA9IHVzZVN0YXRlPGJvb2xlYW4+KClcbiAgY29uc3QgZmllbGRQcmVmZXJlbmNlc0tleSA9IGBjb2xsYXBzaWJsZS0ke2luZGV4UGF0aC5yZXBsYWNlKC9cXC4vZywgJ19fJyl9YFxuICBjb25zdCBbZXJyb3JDb3VudCwgc2V0RXJyb3JDb3VudF0gPSB1c2VTdGF0ZSgwKVxuICBjb25zdCBzdWJtaXR0ZWQgPSB1c2VGb3JtU3VibWl0dGVkKClcblxuICBjb25zdCBvblRvZ2dsZSA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChuZXdDb2xsYXBzZWRTdGF0ZTogYm9vbGVhbikgPT4ge1xuICAgICAgY29uc3QgZXhpc3RpbmdQcmVmZXJlbmNlczogRG9jdW1lbnRQcmVmZXJlbmNlcyA9IGF3YWl0IGdldFByZWZlcmVuY2UocHJlZmVyZW5jZXNLZXkpXG5cbiAgICAgIGlmIChwcmVmZXJlbmNlc0tleSkge1xuICAgICAgICBhd2FpdCBzZXRQcmVmZXJlbmNlKHByZWZlcmVuY2VzS2V5LCB7XG4gICAgICAgICAgLi4uZXhpc3RpbmdQcmVmZXJlbmNlcyxcbiAgICAgICAgICAuLi4ocGF0aFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAuLi4oZXhpc3RpbmdQcmVmZXJlbmNlcz8uZmllbGRzIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgIFtwYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1ByZWZlcmVuY2VzPy5maWVsZHM/LltwYXRoXSxcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBuZXdDb2xsYXBzZWRTdGF0ZSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAuLi4oZXhpc3RpbmdQcmVmZXJlbmNlcz8uZmllbGRzIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgIFtmaWVsZFByZWZlcmVuY2VzS2V5XToge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1ByZWZlcmVuY2VzPy5maWVsZHM/LltmaWVsZFByZWZlcmVuY2VzS2V5XSxcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBuZXdDb2xsYXBzZWRTdGF0ZSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSxcbiAgICBbcHJlZmVyZW5jZXNLZXksIGZpZWxkUHJlZmVyZW5jZXNLZXksIGdldFByZWZlcmVuY2UsIHNldFByZWZlcmVuY2UsIHBhdGhdLFxuICApXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBmZXRjaEluaXRpYWxTdGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChwcmVmZXJlbmNlc0tleSkge1xuICAgICAgICBjb25zdCBwcmVmZXJlbmNlcyA9IGF3YWl0IGdldFByZWZlcmVuY2UocHJlZmVyZW5jZXNLZXkpXG4gICAgICAgIGNvbnN0IHNwZWNpZmljUHJlZmVyZW5jZSA9IHBhdGhcbiAgICAgICAgICA/IHByZWZlcmVuY2VzPy5maWVsZHM/LltwYXRoXT8uY29sbGFwc2VkXG4gICAgICAgICAgOiBwcmVmZXJlbmNlcz8uZmllbGRzPy5bZmllbGRQcmVmZXJlbmNlc0tleV0/LmNvbGxhcHNlZFxuXG4gICAgICAgIGlmIChzcGVjaWZpY1ByZWZlcmVuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNldENvbGxhcHNlZE9uTW91bnQoQm9vbGVhbihzcGVjaWZpY1ByZWZlcmVuY2UpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldENvbGxhcHNlZE9uTW91bnQodHlwZW9mIGluaXRDb2xsYXBzZWQgPT09ICdib29sZWFuJyA/IGluaXRDb2xsYXBzZWQgOiBmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0Q29sbGFwc2VkT25Nb3VudCh0eXBlb2YgaW5pdENvbGxhcHNlZCA9PT0gJ2Jvb2xlYW4nID8gaW5pdENvbGxhcHNlZCA6IGZhbHNlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHZvaWQgZmV0Y2hJbml0aWFsU3RhdGUoKVxuICB9LCBbZ2V0UHJlZmVyZW5jZSwgcHJlZmVyZW5jZXNLZXksIGZpZWxkUHJlZmVyZW5jZXNLZXksIGluaXRDb2xsYXBzZWQsIHBhdGhdKVxuXG4gIGlmICh0eXBlb2YgY29sbGFwc2VkT25Nb3VudCAhPT0gJ2Jvb2xlYW4nKSByZXR1cm4gbnVsbFxuXG4gIGNvbnN0IGZpZWxkSGFzRXJyb3JzID0gc3VibWl0dGVkICYmIGVycm9yQ291bnQgPiAwXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e1tcbiAgICAgICAgZmllbGRCYXNlQ2xhc3MsXG4gICAgICAgIGJhc2VDbGFzcyxcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBmaWVsZEhhc0Vycm9ycyA/IGAke2Jhc2VDbGFzc30tLWhhcy1lcnJvcmAgOiBgJHtiYXNlQ2xhc3N9LS1oYXMtbm8tZXJyb3JgLFxuICAgICAgXVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgICAgIC5qb2luKCcgJyl9XG4gICAgICBpZD17YGZpZWxkLSR7ZmllbGRQcmVmZXJlbmNlc0tleX0ke3BhdGggPyBgLSR7cGF0aC5yZXBsYWNlKC9cXC4vZywgJ19fJyl9YCA6ICcnfWB9XG4gICAgPlxuICAgICAgPFdhdGNoQ2hpbGRFcnJvcnMgZmllbGRTY2hlbWE9e2ZpZWxkc30gcGF0aD17cGF0aH0gc2V0RXJyb3JDb3VudD17c2V0RXJyb3JDb3VudH0gLz5cbiAgICAgIDxDb2xsYXBzaWJsZVxuICAgICAgICBjbGFzc05hbWU9e2Ake2Jhc2VDbGFzc31fX2NvbGxhcHNpYmxlYH1cbiAgICAgICAgY29sbGFwc2libGVTdHlsZT17ZXJyb3JDb3VudCA+IDAgPyAnZXJyb3InIDogJ2RlZmF1bHQnfVxuICAgICAgICBoZWFkZXI9e1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtiYXNlQ2xhc3N9X19yb3ctbGFiZWwtd3JhcGB9PlxuICAgICAgICAgICAgPFJvd0xhYmVsIGxhYmVsPXtsYWJlbH0gcGF0aD17cGF0aH0gLz5cbiAgICAgICAgICAgIHtlcnJvckNvdW50ID4gMCAmJiA8RXJyb3JQaWxsIGNvdW50PXtlcnJvckNvdW50fSB3aXRoTWVzc2FnZSAvPn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgfVxuICAgICAgICBpbml0Q29sbGFwc2VkPXtjb2xsYXBzZWRPbk1vdW50fVxuICAgICAgICBvblRvZ2dsZT17b25Ub2dnbGV9XG4gICAgICA+XG4gICAgICAgIDxSZW5kZXJGaWVsZHNcbiAgICAgICAgICBmaWVsZFNjaGVtYT17ZmllbGRzLm1hcCgoZmllbGQpID0+ICh7XG4gICAgICAgICAgICAuLi5maWVsZCxcbiAgICAgICAgICAgIHBhdGg6IGNyZWF0ZU5lc3RlZEZpZWxkUGF0aChwYXRoLCBmaWVsZCksXG4gICAgICAgICAgfSkpfVxuICAgICAgICAgIGZpZWxkVHlwZXM9e2ZpZWxkVHlwZXN9XG4gICAgICAgICAgZm9yY2VSZW5kZXJcbiAgICAgICAgICBpbmRleFBhdGg9e2luZGV4UGF0aH1cbiAgICAgICAgICBtYXJnaW5zPVwic21hbGxcIlxuICAgICAgICAgIHBlcm1pc3Npb25zPXtwZXJtaXNzaW9uc31cbiAgICAgICAgICByZWFkT25seT17cmVhZE9ubHl9XG4gICAgICAgIC8+XG4gICAgICA8L0NvbGxhcHNpYmxlPlxuICAgICAgPEZpZWxkRGVzY3JpcHRpb24gZGVzY3JpcHRpb249e2Rlc2NyaXB0aW9ufSBwYXRoPXtwYXRofSAvPlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhDb25kaXRpb24oQ29sbGFwc2libGVGaWVsZClcbiJdLCJuYW1lcyI6WyJiYXNlQ2xhc3MiLCJDb2xsYXBzaWJsZUZpZWxkIiwicHJvcHMiLCJhZG1pbiIsImNsYXNzTmFtZSIsImRlc2NyaXB0aW9uIiwiaW5pdENvbGxhcHNlZCIsInJlYWRPbmx5IiwiZmllbGRUeXBlcyIsImZpZWxkcyIsImluZGV4UGF0aCIsImxhYmVsIiwicGF0aCIsInBlcm1pc3Npb25zIiwiZ2V0UHJlZmVyZW5jZSIsInNldFByZWZlcmVuY2UiLCJ1c2VQcmVmZXJlbmNlcyIsInByZWZlcmVuY2VzS2V5IiwidXNlRG9jdW1lbnRJbmZvIiwiY29sbGFwc2VkT25Nb3VudCIsInNldENvbGxhcHNlZE9uTW91bnQiLCJ1c2VTdGF0ZSIsImZpZWxkUHJlZmVyZW5jZXNLZXkiLCJyZXBsYWNlIiwiZXJyb3JDb3VudCIsInNldEVycm9yQ291bnQiLCJzdWJtaXR0ZWQiLCJ1c2VGb3JtU3VibWl0dGVkIiwib25Ub2dnbGUiLCJ1c2VDYWxsYmFjayIsIm5ld0NvbGxhcHNlZFN0YXRlIiwiZXhpc3RpbmdQcmVmZXJlbmNlcyIsImNvbGxhcHNlZCIsInVzZUVmZmVjdCIsImZldGNoSW5pdGlhbFN0YXRlIiwicHJlZmVyZW5jZXMiLCJzcGVjaWZpY1ByZWZlcmVuY2UiLCJ1bmRlZmluZWQiLCJCb29sZWFuIiwiZmllbGRIYXNFcnJvcnMiLCJkaXYiLCJmaWVsZEJhc2VDbGFzcyIsImZpbHRlciIsImpvaW4iLCJpZCIsIldhdGNoQ2hpbGRFcnJvcnMiLCJmaWVsZFNjaGVtYSIsIkNvbGxhcHNpYmxlIiwiY29sbGFwc2libGVTdHlsZSIsImhlYWRlciIsIlJvd0xhYmVsIiwiRXJyb3JQaWxsIiwiY291bnQiLCJ3aXRoTWVzc2FnZSIsIlJlbmRlckZpZWxkcyIsIm1hcCIsImZpZWxkIiwiY3JlYXRlTmVzdGVkRmllbGRQYXRoIiwiZm9yY2VSZW5kZXIiLCJtYXJnaW5zIiwiRmllbGREZXNjcmlwdGlvbiIsIndpdGhDb25kaXRpb24iXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiI7Ozs7K0JBMklBOzs7ZUFBQTs7OytEQTNJd0Q7NkJBSzVCOzJCQUNGOzhCQUNNOzZCQUNEO3lFQUNGO3lCQUNJO3VDQUNLO3FFQUNiOzBCQUNBO2tDQUNRO3NFQUNQO3dCQUNLO1FBQ3hCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVQLE1BQU1BLFlBQVk7QUFFbEIsTUFBTUMsbUJBQW9DLENBQUNDO0lBQ3pDLE1BQU0sRUFDSkMsT0FBTyxFQUFF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