"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "appendVersionToQueryKey", {
    enumerable: true,
    get: function() {
        return appendVersionToQueryKey;
    }
});
const appendVersionToQueryKey = (query)=>{
    return Object.entries(query).reduce((res, [key, val])=>{
        if ([
            'AND',
            'OR',
            'and',
            'or'
        ].includes(key) && Array.isArray(val)) {
            return {
                ...res,
                [key.toLowerCase()]: val.map((subQuery)=>appendVersionToQueryKey(subQuery))
            };
        }
        if (key !== 'id') {
            return {
                ...res,
                [`version.${key}`]: val
            };
        }
        return {
            ...res,
            parent: val
        };
    }, {});
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy92ZXJzaW9ucy9kcmFmdHMvYXBwZW5kVmVyc2lvblRvUXVlcnlLZXkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBXaGVyZSB9IGZyb20gJy4uLy4uL3R5cGVzJ1xuXG5leHBvcnQgY29uc3QgYXBwZW5kVmVyc2lvblRvUXVlcnlLZXkgPSAocXVlcnk6IFdoZXJlKTogV2hlcmUgPT4ge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMocXVlcnkpLnJlZHVjZSgocmVzLCBba2V5LCB2YWxdKSA9PiB7XG4gICAgaWYgKFsnQU5EJywgJ09SJywgJ2FuZCcsICdvciddLmluY2x1ZGVzKGtleSkgJiYgQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXMsXG4gICAgICAgIFtrZXkudG9Mb3dlckNhc2UoKV06IHZhbC5tYXAoKHN1YlF1ZXJ5KSA9PiBhcHBlbmRWZXJzaW9uVG9RdWVyeUtleShzdWJRdWVyeSkpLFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChrZXkgIT09ICdpZCcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlcyxcbiAgICAgICAgW2B2ZXJzaW9uLiR7a2V5fWBdOiB2YWwsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlcyxcbiAgICAgIHBhcmVudDogdmFsLFxuICAgIH1cbiAgfSwge30pXG59XG4iXSwibmFtZXMiOlsiYXBwZW5kVmVyc2lvblRvUXVlcnlLZXkiLCJxdWVyeSIsIk9iamVjdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJyZXMiLCJrZXkiLCJ2YWwiLCJpbmNsdWRlcyIsIkFycmF5IiwiaXNBcnJheSIsInRvTG93ZXJDYXNlIiwibWFwIiwic3ViUXVlcnkiLCJwYXJlbnQiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6Ijs7OzsrQkFFYUE7OztlQUFBQTs7O0FBQU4sTUFBTUEsMEJBQTBCLENBQUNDO0lBQ3RDLE9BQU9DLE9BQU9DLE9BQU8sQ0FBQ0YsT0FBT0csTUFBTSxDQUFDLENBQUNDLEtBQUssQ0FBQ0MsS0FBS0MsSUFBSTtRQUNsRCxJQUFJO1lBQUM7WUFBTztZQUFNO1lBQU87U0FBSyxDQUFDQyxRQUFRLENBQUNGLFFBQVFHLE1BQU1DLE9BQU8sQ0FBQ0gsTUFBTTtZQUNsRSxPQUFPO2dCQUNMLEdBQUdGLEdBQUc7Z0JBQ04sQ0FBQ0MsSUFBSUssV0FBVyxHQUFHLEVBQUVKLElBQUlLLEdBQUcsQ0FBQyxDQUFDQyxXQUFhYix3QkFBd0JhO1lBQ3JFO1FBQ0Y7UUFFQSxJQUFJUCxRQUFRLE1BQU07WUFDaEIsT0FBTztnQkFDTCxHQUFHRCxHQUFHO2dCQUNOLENBQUMsQ0FBQyxRQUFRLEVBQUVDLElBQUksQ0FBQyxDQUFDLEVBQUVDO1lBQ3RCO1FBQ0Y7UUFFQSxPQUFPO1lBQ0wsR0FBR0YsR0FBRztZQUNOUyxRQUFRUDtRQUNWO0lBQ0YsR0FBRyxDQUFDO0FBQ04ifQ==